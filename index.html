<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Coastal Ecosystems in Qatar â€” SPI (Filterable)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Leaflet + Icons -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- Your CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Small beautify (no JS changes) -->
  <style>
    :root{
      --bg:#f7f7fb; --card:#ffffff; --ink:#1b1f2a; --muted:#6b7280;
      --accent:#2563eb; --ring:#e5e7eb; --radius:14px; --shadow:0 6px 24px rgba(0,0,0,.08);
    }
    html, body { background: var(--bg); color: var(--ink); }
    header{
      position: sticky; top: 0; z-index: 1000;
      background: linear-gradient(180deg,#fff,rgba(255,255,255,.92) 60%, rgba(255,255,255,0));
      backdrop-filter: blur(6px);
      border-bottom: 1px solid var(--ring);
      box-shadow: 0 4px 18px rgba(0,0,0,.04);
    }
    header h1{
      margin: 10px 0 6px; text-align: center; font-size: 20px; letter-spacing:.2px; font-weight: 800;
    }
    header nav{
      display: flex; gap: 16px; justify-content: center; padding-bottom: 10px;
    }
    header nav a{
      color: var(--muted); text-decoration: none; font-size: 14px; display: inline-flex; align-items: center; gap: 6px;
      background: #fff; border: 1px solid var(--ring); padding: 6px 10px; border-radius: 999px;
      box-shadow: 0 2px 10px rgba(0,0,0,.04);
    }
    header nav a[aria-current="page"]{ color: #fff; background: var(--accent); border-color: transparent; }
    header nav a:hover{ filter: brightness(.97); }

    /* Make the filter panel look like a small card; keep same HTML/IDs */
    #controls{
      position: absolute; top: 86px; left: 50%; transform: translateX(-50%);
      background: var(--card); border: 1px solid var(--ring); border-radius: var(--radius);
      padding: 8px 12px; display: flex; align-items: center; gap: 8px;
      box-shadow: var(--shadow); z-index: 1200; font-size: 13px;
    }
    #controls label{ color: var(--muted); display: inline-flex; align-items:center; gap: 6px; }
    #controls select, #controls button{
      border-radius: 10px; border: 1px solid var(--ring); background: #fff;
      padding: 6px 10px; font-size: 13px; box-shadow: 0 2px 10px rgba(0,0,0,.04);
    }
    #controls button{ cursor: pointer; }
    #controls button:hover{ background: #f9fafb; }

    /* Keep map tidy */
    #map{ border-radius: var(--radius); border: 1px solid var(--ring); overflow: hidden; }
    @media (max-width: 720px){
      #controls{ left: 12px; right: 12px; transform: none; }
    }
  </style>
</head>
<body>
  <header>
    <h1><i class="fa fa-water" aria-hidden="true"></i> Coastal Ecosystems in Qatar</h1>
    <!-- <nav>
      <a href="index.html" aria-current="page"><i class="fa fa-map"></i> Map</a>
      <a href="#" title="coming soon"><i class="fa fa-flask"></i> Method</a>
      <a href="#" title="coming soon"><i class="fa fa-database"></i> Data &amp; Sources</a>
      <a href="#" title="coming soon"><i class="fa fa-circle-info"></i> About</a>
    </nav> -->
  </header>

 
  <div id="controls" role="form" aria-label="Filter by month and year">
    <label for="monthYearSelect"><i class="fa fa-calendar"></i> Month/Year:</label>
    <select id="monthYearSelect" aria-label="Select month and year"></select>
    <button id="resetBtn" type="button" title="Reset filters"><i class="fa fa-rotate"></i> Reset</button>
  </div>

  <div id="map" role="region" aria-label="Qatar seasonal SPI map"></div>

  <!-- Leaflet & Your JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js" defer></script>

  
  <script>
    (function setupBasemaps(){
      const wait = () => {
        if (!(window.map && window.L)) { setTimeout(wait, 50); return; }

     
        Object.values(map._layers).forEach(layer => {
          if (layer instanceof L.TileLayer) { map.removeLayer(layer); }
        });

       
        const cartoVoyager = L.tileLayer(
          'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',
          { attribution: '&copy; OSM, &copy; CARTO', subdomains: 'abcd', maxZoom: 20 }
        );

        const cartoPositron = L.tileLayer(
          'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
          { attribution: '&copy; OSM, &copy; CARTO', subdomains: 'abcd', maxZoom: 20 }
        );

        const osmStandard = L.tileLayer(
          'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
          { attribution: '&copy; OpenStreetMap contributors', maxZoom: 19 }
        );

        
        cartoVoyager.addTo(map);

        
        const baseLayers = {
          "Carto Voyager (EN)": cartoVoyager,
          "Carto Positron (EN)": cartoPositron,
          "OSM Standard": osmStandard
        };
        L.control.layers(baseLayers, null, { position: 'topright', collapsed: false }).addTo(map);
      };
      wait();
    })();
  </script>
</body>
</html>


   


